{"ast":null,"code":"import { createAsyncThunk, createSlice, isRejectedWithValue } from '@reduxjs/toolkit';\nimport { connectToMetamask, connectToBinance, joinMetamaskAuction, joinBinanceAuction } from './connectWallet';\nconst initialState = {\n  accounts: [],\n  connectedMetamask: false,\n  connectedBinance: false,\n  connectedAccount: 'Not Connected',\n  connectionStatus: 'Not Connected'\n};\nexport const connectMetamask = createAsyncThunk('wallet/connectMetamask', async (arg, _ref) => {\n  let {\n    rejectWithValue\n  } = _ref;\n\n  try {\n    return await connectToMetamask();\n  } catch (err) {\n    return rejectWithValue(err.response.data);\n  }\n});\nexport const connectBinance = createAsyncThunk('wallet/connectBinance', async (arg, _ref2) => {\n  let {\n    rejectWithValue\n  } = _ref2;\n\n  try {\n    return await connectToBinance();\n  } catch (err) {\n    return rejectWithValue(err.response.data);\n  }\n});\nexport const joinAuction = createAsyncThunk('wallet/joinAuction', async (bidAmount, _ref3) => {\n  let {\n    getState,\n    rejectWithValue\n  } = _ref3;\n  const state = getState();\n\n  try {\n    if (state.wallet.connectedMetamask) {\n      return await joinMetamaskAuction(bidAmount);\n    } else if (state.wallet.connectedBinance) {\n      return await joinBinanceAuction(bidAmount);\n    }\n  } catch (err) {\n    return rejectWithValue(err.response.data);\n  }\n});\nexport const walletSlice = createSlice({\n  name: 'wallet',\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(connectMetamask.fulfilled, (state, action) => {\n      state.connectedMetamask = true;\n      state.connectionStatus = 'Connected to Metamask';\n      state.connectedAccount = action.payload;\n    }).addCase(connectMetamask.rejected, (state, action) => {\n      state.connectionStatus = 'User denied account access';\n    }).addCase(connectBinance.fulfilled, (state, action) => {\n      state.connectedMetamask = true;\n      state.connectionStatus = 'Connected to Binance';\n      state.connectedAccount = action.payload;\n    }).addCase(connectBinance.rejected, (state, action) => {\n      state.connectionStatus = 'User denied account access';\n    }).addCase(joinAuction.fulfilled, (state, action) => {\n      state.connectionStatus = action.payload;\n    }).addCase(joinAuction.rejectedWithValue, (state, action) => {\n      state.connectionStatus = action.error;\n    });\n  }\n});\nexport const selectWallet = state => state.wallet;\nexport default walletSlice.reducer;","map":{"version":3,"sources":["/Users/jerry/Documents/simple-crypto-auction/src/features/wallet/walletSlice.js"],"names":["createAsyncThunk","createSlice","isRejectedWithValue","connectToMetamask","connectToBinance","joinMetamaskAuction","joinBinanceAuction","initialState","accounts","connectedMetamask","connectedBinance","connectedAccount","connectionStatus","connectMetamask","arg","rejectWithValue","err","response","data","connectBinance","joinAuction","bidAmount","getState","state","wallet","walletSlice","name","reducers","extraReducers","builder","addCase","fulfilled","action","payload","rejected","rejectedWithValue","error","selectWallet","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice, isRejectedWithValue } from '@reduxjs/toolkit';\nimport { connectToMetamask, connectToBinance, joinMetamaskAuction, joinBinanceAuction } from './connectWallet';\n\nconst initialState = {\n  accounts: [],\n  connectedMetamask: false,\n  connectedBinance: false,\n  connectedAccount: 'Not Connected',\n  connectionStatus: 'Not Connected',\n};\n\nexport const connectMetamask = createAsyncThunk(\n  'wallet/connectMetamask',\n  async (arg, { rejectWithValue }) => {\n    try {\n      return await connectToMetamask();\n    } catch (err) {\n      return rejectWithValue(err.response.data);\n    }\n  }\n);\n\nexport const connectBinance = createAsyncThunk(\n  'wallet/connectBinance',\n  async (arg, { rejectWithValue }) => {\n    try {\n      return await connectToBinance();\n    } catch (err) {\n      return rejectWithValue(err.response.data);\n    }\n  }\n);\n\nexport const joinAuction = createAsyncThunk(\n  'wallet/joinAuction',\n  async (bidAmount, { getState, rejectWithValue }) => {\n    const state = getState();\n    try {\n      if (state.wallet.connectedMetamask) {\n        return await joinMetamaskAuction(bidAmount)\n      } else if (state.wallet.connectedBinance) {\n        return await joinBinanceAuction(bidAmount)\n      }\n    } catch (err) {\n      return rejectWithValue(err.response.data);\n    }\n  });\n\nexport const walletSlice = createSlice({\n  name: 'wallet',\n  initialState,\n  reducers: {\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(connectMetamask.fulfilled, (state, action) => {\n        state.connectedMetamask = true;\n        state.connectionStatus = 'Connected to Metamask';\n        state.connectedAccount = action.payload;\n      })\n      .addCase(connectMetamask.rejected, (state, action) => {\n        state.connectionStatus = 'User denied account access';\n      })\n      .addCase(connectBinance.fulfilled, (state, action) => {\n        state.connectedMetamask = true;\n        state.connectionStatus = 'Connected to Binance';\n        state.connectedAccount = action.payload;\n      })\n      .addCase(connectBinance.rejected, (state, action) => {\n        state.connectionStatus = 'User denied account access';\n      })\n      .addCase(joinAuction.fulfilled, (state, action) => {\n        state.connectionStatus = action.payload;\n      })\n      .addCase(joinAuction.rejectedWithValue, (state, action) => {\n        state.connectionStatus = action.error;\n      });\n  },\n});\n\nexport const selectWallet = (state) => state.wallet;\n\nexport default walletSlice.reducer;"]},"metadata":{},"sourceType":"module"}